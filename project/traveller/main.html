<html>
<head>
  <title>traveller</title>
</head>
<body colorfg="blue">
  <script type="text/lua">
  local _SpaceShip = {}
  local _mtSpaceShip = {__index = _SpaceShip} 

  function _SpaceShip.Run(self)
  end

  function InitSpaceShip()
    local SpaceShip = setmetatable({}, _mtSpaceShip)

    SpaceShip.LocationX = 0
    SpaceShip.LocationY = 0
    SpaceShip.SpeedX = 0
    SpaceShip.SpeedY = 0

    local Warehouse = {}
    SpaceShip.Warehouse = Warehouse 

    return SpaceShip
  end

  WorldLoop = function()
  end 

  local NodeRadar = Node("CanvasRadar")
  local NodeTerminalMain = Node("TerminalMain")

  NodeRadar:SetAttribute("height", tostring(WindowHeight()-NodeTerminalMain:Height()))
  --[[

  GUserSpaceShip = InitSpaceShip()
  ]]
  
  --[[
  WorldLoopSig = SetInterval(200, WorldLoop)
  SetTimeout(3000, function()
    SendCancelSig(WorldLoopSig)
  end)

  local NodeRadar = Node("CanvasRadar")
  NodeRadar:CanvasSet(12, 3, "#", "green", "")
  NodeRadar:CanvasSet(48, 10, "#", "green", "red")
  NodeRadar:CanvasSet(16, 15, "#", "green", "")
  NodeRadar:CanvasSet(75, 5, "#", "green", "")
  NodeRadar:CanvasSet(56, 13, "#", "green", "")
  NodeRadar:CanvasSet(44, 12, "*", "blue", "")
  NodeRadar:CanvasDraw(12,3)

  RadarKeyPressHandler = function(nodePointer, keyStr)
    if "<left>" == keyStr then
      SpaceShip["LocationX"] = SpaceShip["LocationX"] - 1
    elseif "<right>" == keyStr then
      SpaceShip["LocationX"] = SpaceShip["LocationX"] + 1
    elseif "<up>" == keyStr then
      SpaceShip["LocationY"] = SpaceShip["LocationY"] - 1
    elseif "<down>" == keyStr then
      SpaceShip["LocationY"] = SpaceShip["LocationY"] + 1
    end
    NodeRadar:SetCursor(SpaceShip["LocationX"], SpaceShip["LocationY"])
  end

  RadarKeyPressEvent = NodeRadar:RegisterKeyPressHandler(RadarKeyPressHandler)

  TerminalMainCommandHandle = function(nodePointer, command)
    if "punch" == command then
      NodeTerminalMain:TerminalWriteNewLine("  punch success.")
    elseif "clear" == command then
      NodeTerminalMain:TerminalClearLines()
    elseif "destory" == command then
      NodeTerminalMain:TerminalRemoveCommandHandle(TerminalMainCommandEvent)
    end
  end
  TerminalMainCommandEvent = NodeTerminalMain:TerminalRegisterCommandHandle(TerminalMainCommandHandle)
  ]]
  </script>
  <table>
     <tr>
       <td cols=9>
         <canvas id="CanvasRadar" borderlabel=" 雷达 "></canvas>
       </td>
       <td>
         <par border=true>
未命名星球
X: 95
Y: 59 
资源:81720
         </par>

         <gauge border=true 
                    percentcolor="blue" percentcolor_highlighted="white" barcolor="green"
                    borderlabel=" 生命线 " height=3 percent=80></gauge>

         <gauge border=true 
                    percentcolor="blue" percentcolor_highlighted="blue" barcolor="green"
                    borderlabel=" 燃料 " percentcolor="blue" barcolor="red" height=3 percent=20></gauge>

         <!--
         <par border=true borderlabel=" 仓库 " paddingtop=1 paddingbottom=1 paddingleft=1 paddingright=1>
         -->
         <par border=true borderlabel=" 仓库 ">
炮弹: 612
时空跳跃者:3
         </par>

         <par border=true borderlabel=" 鹦鹉螺号 ">
X: 91
Y: 61 
速度X: 0.3/s
速度Y: 0.3/s
船员: 7
飞行历时: 09:53
         </par>

       </td>
     </tr>
     <tr>
       <td>
          <terminal borderlabel=" 控制台 " border=true id="TerminalMain" height=8></terminal>
       </td>
     </tr>
  </table>
</body>
</html>
