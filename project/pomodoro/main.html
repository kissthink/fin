<html>
<head>
  <title>pomodoro</title>
</head>
<body colorfg="blue">
  <table>
    <tr>
      <td><par height=6></par></td>
    </tr>
    <tr>
      <td offset=4 cols=4>
        <gauge id="GaugeProgress" Percent="0" 
                                  PercentColor="black" 
                                  percentcolor_highlighted="black" BarColor="white">
        </gauge>
      </td>
    </tr>
  </table>
  <script type="text/lua">
  Max = 30.0
  TimeElapse = 0 
  GaugeProgressUpdateFunc = function()
    TimeElapse = TimeElapse + 1.0
    percent = TimeElapse / 30.0

    if TimeElapse / 30.0 > 1.0 then
      Node("GaugeProgress"):SetAttribute("percent", "100")
      SendCancelSig(GaugeProgressCancelSig) 
    else 
      Node("GaugeProgress"):SetAttribute("percent", tostring(math.ceil(percent * 100)))
    end

    if percent < 0.3 then
      Node("GaugeProgress"):SetAttribute("barcolor", "red")
    elseif percent < 0.6 then
      Node("GaugeProgress"):SetAttribute("barcolor", "yellow")
    elseif percent < 0.9 then
      Node("GaugeProgress"):SetAttribute("barcolor", "green")
    else
      Node("GaugeProgress"):SetAttribute("barcolor", "blue")
      Node("GaugeProgress"):SetAttribute("percentcolor_highlighted", "white")
    end
    if TimeElapse / 30.0 > 1.0 then
      SendCancelSig(GaugeProgressCancelSig)
    end
  end
  GaugeProgressCancelSig = SetInterval(200, GaugeProgressUpdateFunc) 
  --[[
  ]]--
  </script>
</body>
</html>
